{% extends 'base.html' %}

{% block title %}Feed{% endblock %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/feed.css' %}" />
<!-- Hero -->
<section class="hero-feed">
    <div class="hero-text-feed">
        <h1>
            <span class="word">Trade What You Do <span class="span-h1-feed">Best.</span></span><br>
            <span class="word delay">Gain What You Need <span class="span-h1-feed">Most.</span></span>
        </h1>
    </div>
    <div class="hero-image-feed">
        <img src="../Img/feed.png" alt="hero" />
    </div>
</section>

<!-- Content -->
<section class="content-feed">
    <div class="filtros">
        <form method="get" class="filter-controls">
    <div class="filter-group dropdown-group">
        <select name="category" id="category-select" class="custom-select">
            <option value="">All Categories</option>
            <option value="Gardening" {% if selected_category == "Gardening" %}selected{% endif %}>Gardening</option>
            <option value="Plumbing" {% if selected_category == "Plumbing" %}selected{% endif %}>Plumbing</option>
            <option value="Nanny" {% if selected_category == "Nanny" %}selected{% endif %}>Nanny</option>
            <option value="Furniture Assembler" {% if selected_category == "Furniture Assembler" %}selected{% endif %}>Furniture Assembler</option>
        </select>
    </div>

    <div class="filter-group dropdown-group">
        <select name="location" id="location-select" class="custom-select">
            <option value="">All Locations</option>
            <option value="Portugal" {% if selected_location == "Portugal" %}selected{% endif %}>Portugal</option>
            <option value="Lisboa" {% if selected_location == "Lisboa" %}selected{% endif %}>Lisboa</option>
            <option value="Porto" {% if selected_location == "Porto" %}selected{% endif %}>Porto</option>
            <option value="Albufeira" {% if selected_location == "Albufeira" %}selected{% endif %}>Albufeira</option>
        </select>
    </div>

    <div class="filter-group">
        <button type="submit" class="header-btn">Filter</button>
    </div>
</form>

    </div>
</section>

<!-- Feed -->
<section class="feed">
    <div id="feed-container" class="card-grid">
        {% for service in services %}
            <div class="card">
                <div class="card-left">
                    <h3 class="category-h3">{{ service.category }}</h3>
                    <img src="{% static 'core/img/default-service.png' %}" alt="{{ service.category }}">
                </div>
                <div class="card-right">
                    <h4>{{ service.owner.first_name }} {{ service.owner.last_name }}</h4>
                    <div class="stars">
                        {% for i in "12345" %}
                            {% if forloop.counter <= service.rating|default:3 %}
                                â˜…
                            {% else %}
                                â˜†
                            {% endif %}
                        {% endfor %}
                    </div>
                    <p>{{ service.description }}</p>
                    <button class="contact-btn">CONTACT ðŸ“©</button>
                </div>
            </div>
        {% empty %}
            <p>No services found, yo. Try changing your filters.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}